<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../static/style.css">
    <title>Ratespiel</title>
</head>
<body>
    <header>
        <button class="nav-button" id="play-button">Zurück zum Spiel</button>
        <button class="nav-button" id="settings-button">Einstellungen</button>
    </header>

    <div class="container" id="shop">
        <section id="item_nav">
            <h2>Shop Items</h2>
            <ul class="item_list">
                <li class="item" data-name="Würfel" data-image="../footage/dice_600x400.jpg" data-description="Beschreibung Wüfel" data-price="100">
                    <img src="../footage/dice_150x150.jpg" alt="Würfel">
                    <span>Würfel</span>
                </li>
                <li class="item" data-name="Oma" data-image="../footage/gradma_600x400.jpg>" data-description="Beschreibung Oma" data-price="1000">
                    <img src="../footage/grandma_150x150.jpg" alt="Oma">
                    <span>Oma</span>
                </li>
                <li class="item" data-name="Professor" data-image"../footage/professor_600x400.jpg" data-description="Beschreibung Professor" data-price="2500">
                    <img src="../footage/professor_150x150.jpg" alt="Professor">
                    <span>Professor</span>
                </li>
            </ul>
        </section>

        <section id="item_show">
            <div id="item_header">
                <div id="points">Punktestand: 1000</div>
                <h2>Item Name</h2>
            </div>
            <div id="item_frame">
                <img src="../footage/dice_600x400.jpg" alt="Item Bild">
            </div>
            <div id="item_description">
                <p>Beschreibung des ausgewählten Items.</p>
                <p>Preis: 50 Coins</p>
                <button class="buy-button" id="buy-button">Kaufen</button>
            </div>
        </section>
    </div>

    <footer>
        <button class="logout-button" id="logout-button">Logout</button>
        <script>
            const logout_url = "{{ url_for('api.auth.api_logout') }}"

            document.getElementById("logout-button").addEventListener("click", async (event) => {
                const response = await fetch(logout_url, { method: "POST" });
                window.location.reload();
            })
        </script>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const itemNav = document.getElementById("item_nav");
            const itemShow = document.getElementById("item_show");

            itemNav.addEventListener("click", function (event) {
                if (event.target.classList.contains("item")) {
                    const selectedItem = event.target;
                    const itemName = selectedItem.dataset.name;
                    const itemImage = selectedItem.dataset.image;
                    const itemDescription = selectedItem.dataset.description;
                    const itemPrice = selectedItem.dataset.price;

                    const itemHeader = itemShow.querySelector("#item_header");
                    const itemFrame = itemShow.querySelector("#item_frame");
                    const itemDescriptionDiv = itemShow.querySelector("#item_description");

                    itemHeader.querySelector("h2").textContent = itemName;
                    itemFrame.innerHTML = `<img src="${itemImage}" alt="${itemName}">`;
                    itemDescriptionDiv.innerHTML = `
                        <p>${itemDescription}</p>
                        <p>Preis: ${itemPrice} Coins</p>
                        <button class="buy-button" id="buy-button">Kaufen</button>
                    `;
                }
            });
        });
    </script>
</body>
</html>
